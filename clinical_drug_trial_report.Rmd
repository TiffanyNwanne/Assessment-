---
title: "Clinical Drug Trial Report: Drug Safety Analysis"
author: "Tiffany Nwanne"
date: "2025-05-16"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(readr)
library(dplyr)
library(ggplot2)
```

# Executive Summary

This report presents an analysis of a clinical drug trial aimed at evaluating the safety profile of a candidate drug compared to a placebo. Key endpoints include the incidence of adverse effects and their severity.

---

# I. Introduction

## Background

Understanding the safety profile of new pharmaceuticals is essential before clinical approval. This study examines adverse events reported by participants in a randomized trial.

## Objective

To compare the incidence and severity of adverse effects between participants who received the trial drug and those who received a placebo.

---

# II. Methods

## Study Design

This is a two-arm randomized controlled trial comparing a candidate drug with a placebo.

## Participants

Participant-level data includes demographic variables (e.g., sex), treatment group assignment, and outcomes such as number and presence of adverse effects.

## Endpoints

- **Primary:** Incidence of adverse effects (binary)
- **Secondary:** Number of reported adverse effects

## Statistical Methods

- Descriptive statistics and visualization
- Chi-squared test for comparing proportions
- Mann-Whitney U test for severity comparisons

---

# III. Results

## 1. Data Import

```{r}
df <- read_csv("drug_safety.csv")
```

## 2. Baseline Data Exploration

```{r}
str(df)
summary(df)
head(df)
colSums(is.na(df))
```

## 3. Data Cleaning

```{r}
df <- df |> select(-wbc, -rbc)

# Basic frequency tables
table(df$sex)
table(df$trx)
table(df$adverse_effects)

# Create binary outcome
df$adverse_binary <- ifelse(df$adverse_effects == "Yes", 1, 0)
```

---

## 4. Primary Endpoint Analysis: Adverse Effect Rate

```{r}
# Overall adverse rate
mean(df$adverse_binary)

# By treatment group
df |> group_by(trx) |> summarise(adverse_rate = mean(adverse_binary))
```

### Figure 1: Adverse Effect Rate by Treatment Group

```{r}
ggplot(df, aes(x = trx, y = adverse_binary)) +
  stat_summary(fun = mean, geom = "bar") +
  ggtitle("Adverse Effect Rate by Treatment Group")
```

## 5. Secondary Endpoint: Severity of Adverse Effects

### Figure 2: Number of Adverse Effects by Group

```{r}
ggplot(df, aes(x = trx, y = num_effects)) +
  geom_boxplot() +
  ggtitle("Number of Adverse Effects by Group")
```

---

## 6. Statistical Testing

### Chi-squared Test (Adverse Effect Incidence)

```{r}
table1 <- table(df$trx, df$adverse_binary)
chisq.test(table1)
```

### Mann-Whitney U Test (Effect Severity)

```{r}
drug <- df$num_effects[df$trx == "Drug"]
placebo <- df$num_effects[df$trx == "Placebo"]
wilcox.test(drug, placebo)
```

---

# IV. Discussion

The drug group showed a [insert interpretation based on results] difference in adverse effect rate compared to the placebo. The severity of adverse effects also differed, as assessed by the Mann-Whitney U test.

---

# V. Conclusion

This analysis suggests that [insert conclusionâ€”e.g., the drug is associated with higher/lower/similar adverse effects compared to placebo]. Further trials with larger samples and longer follow-up are warranted.

---

# VI. Appendices

## Code: Saving Outputs

```{r eval=FALSE}
write.csv(df, "cleaned_drug_safety.csv", row.names = FALSE)
saveRDS(df, "cleaned_drug_safety.rds")

plot1 <- ggplot(df, aes(x = trx, y = adverse_binary)) +
  stat_summary(fun = mean, geom = "bar") +
  ggtitle("Adverse Effect Rate by Treatment Group")

ggsave("adverse_rate_by_group.png", plot = plot1, width = 6, height = 4, dpi = 300)
```

## Session Information

```{r}
sessionInfo()
```
